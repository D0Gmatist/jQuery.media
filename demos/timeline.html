<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8" />
		<title>HTML5 Video Player</title>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../source/jquery.media.js" type="text/javascript" charset="utf-8"></script>
		<script src="../source/jquery.media.timeline.js" type="text/javascript" charset="utf-8"></script>

		<script type="text/javascript">
			var video;

			$(document).ready(function () {
				video = $.media('video');
				var log = $('#log');

				$(document).on('touchmove', function () {
					log.html('touchmove ' + video.time());
				});
				$(document).on('touchstart', function () {
					log.html('touchstart ' + video.time());
				});
				$(document).on('touchend', function () {
					log.html('touchend ' + video.time());
				});

				video.setTimeline('first', {
					enabled: true,
					points: [
						{
							time: 2,
							fn: function (point, timeline) {
								log.html('estamos no segundo 2');

								this.setTimeline('second', {
									points: {
										time: 5,
										fn: function () {
											log.html('metido o non timeline dentro doutro');
										}
									}
								});
							}
						},{
							time: [3, '00:04'],
							fn: function () {
								log.html('estamos no segundo 3 a 4');
								this.enableTimeline('second');
							}
						},{
							time: [5, 6],
							fn: function () {
								log.html('estamos no segundo 5 a 6');
							},
							fn_out: function () {
								log.html('xa non estamos entre o 5 e 6');
							}
						}
					]
				}).play();
			});
		</script>
	</head>

	<body>
		<video width="500" controls>
			<source src="http://archive.org/download/PUPPET_SHOW/PUPPET_SHOW_DIVX_512kb.mp4">
			<source src="http://archive.org/download/PUPPET_SHOW/PUPPET_SHOW_DIVX.ogv">
		</video>
		<div id="log"></div>
	</body>
</html>