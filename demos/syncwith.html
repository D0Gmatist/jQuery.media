<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8" />
		<title>HTML5 Video Player</title>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../source/media-core.js" type="text/javascript" charset="utf-8"></script>
		<script src="../source/plugins/syncwith.js" type="text/javascript" charset="utf-8"></script>
		<script src="../source/plugins/tocanvas.js" type="text/javascript" charset="utf-8"></script>

		<script type="text/javascript">
			var video1;
			var video2;
			var video3;

			$(document).ready(function () {
				video1 = $.mediaVideo('files/video2.ogv').mute().toCanvas('#video1');
				video2 = $.mediaVideo('files/video2.ogv').mute().toCanvas('#video2');
				video3 = $.mediaVideo('files/video2.ogv').mute().toCanvas('#video3'); /*, 'pixel_manipulation', function (pixels) {
					var total = pixels.length / 4;

					for (var i = 0; i < total; i ++) {
						pixels[i * 4 + 1] = pixels[(i+10) * 4 + 1];
						if (pixels[i * 4 + 1] > 128) {
							//pixels[i * 4 + 3] = 0;
						}


						if (i % 2) {
							//pixels[i * 4 + 3] = 0;
						}
					}
				});
				*/

				video1
					.syncWith(video2)
					.syncWith(video3)
					.syncReady(function () {
						this.play();
					}).end(function () {
						this.seek(0).play();
					});

				$('body').click(function () {
					video1.seek('50%');
				});
			});
		</script>
	</head>

	<body style="background: #CCC;">
		<canvas id="video1"></canvas>
		<canvas id="video2"></canvas>
		<canvas id="video3"></canvas>
	</body>
</html>